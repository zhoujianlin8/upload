<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>找回密码</title>
<link href="../c/reset.css" rel="stylesheet" type="text/css" media="all">
<link href="../c/base.css" rel="stylesheet" type="text/css" media="all">
    <!--[if IE 6]>
    <script src="../j/DD_belatedPNG.js"></script>
    <script>
        DD_belatedPNG.fix('.png');
    </script>
    <![endif]-->
</head>
<body>
<div class="wrap ">
	<!-- 头部内容 -->
	<div class="head">
		<!-- logo -->
		<div class="logo fl png"></div>
		<!-- logo End -->
		<!-- 主体菜单 -->
		<div class="mainNav fl png">
			<ul>
				<li><a href="###">首页</a><i></i></li>
				<li><a href="###">游戏</a><i></i></li>
				<li><a href="###">下载</a><i></i></li>
				<li class="cur"><a href="###">充值</a><i></i></li>
				<li><a href="###">商城</a><i></i></li>
				<li><a href="###">会员</a><i></i></li>
				<li><a href="###">推广分红</a></li>
			</ul>
		</div>
		<!-- 主体菜单End -->
		<!-- 登录区 -->
		<div class="loginArea png">
			<ul class="di">
				<li><a href="###">登录</a><small>|</small></li>
				<li><a href="###">注册</a><small>|</small></li>
				<li><a href="###">忘记密码</a><small>|</small></li>
				<li><a href="###">帮助中心</a></li>
			</ul>
		</div>
		<!-- 登录区End -->
	</div>
	<!-- 头部内容End -->
    <!--找回密码-->
    <div class="enroll findPassword">
        <div class="hd clearFix png">
            <div class="bread fl">
                <i></i><span>首页</span><span> > </span><span>找回密码</span>
            </div>
        </div>
        <!--nav  二级导航-->
        <div class="navPhoneEnroll" id="nav_step">
            <ul class="clearFix">
                <li class="cur hover"><a href="###">1.输入要找回的账户名</a><i></i></li>
                <li><a href="###">2.选择找回方式</a><i></i></li>
                <li><a href="###">3.安全验证</a><i></i></li>
                <li><a href="###">4.重置密码</a></li>
            </ul>
        </div>
        <!--nav  二级导航 end-->
        <!--输入要找回的账户名-->
        <form action="" class="inputAccount hide" id="form_step1">
            <div class="bd">
                <div class="formTr">
                    <b>游戏账号：</b>
                    <input type="text" class="inputSmall" placeholder="请输入您的账号..." id="txt_step1_account" data-valid="{'type':'txt', 'msg':'未输入账号'}">
                    <i class="ok png hide" id="ico_step1_account"></i>
                    <span id="msg_step1_account"></span>
                </div>
                <div class="formTr">
                    <b>验证码：</b>
                    <input type="text" class="inputMin" id="txt_step1_checkcode" data-valid="{'type':'txt', 'msg':'未输入验证码'}">
                    <div class="checkedNumber inlineB" style="width: 130px; height: 36px; margin: 0 5px;"><img src="../images/checkedNumber.png"/></div>
                    <button class="green" id="btn_step1_checkcode">换一张</button>
                    <i class="ok png hide" id="ico_step1_checkcode"></i>
                    <span id="msg_step1_checkcode"></span>
                </div>
            </div>
            <div class="ft textC linear png">
                <a href="###" class="btn enrollNow" id="btn_submit_step1">下一步</a>
            </div>
        </form>
        <!--输入要找回的账户名 end-->

        <!--选择找回方式-->
        <div class="findStyle hide" id="div_step2">
            <p class="title">您现在正在为账号<span class="orange">yvonne330 </span> 找回密码，请选择找回方式</p>
            <div class="styleList" id="div_by_style">
                <ul class="clearFix">
                    <li>
                        <div class="phoneStyle lineLeft png">
                            <i class="stylePic png i"></i>
                            <p class="findBack">通过手机验证码找回（推荐）</p>
                            <div class="textC">
                                <!-- <a href="###" class="btn png disabled" data-type="mobile">您暂未绑定手机</a> -->
                                <a href="###" class="btn png enrollNow" data-type="mobile">手机找回</a>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="emailStyle lineLeft png">
                            <i class="stylePic png i"></i>
                            <p class="findBack">通过邮箱验证码找回</p>
                            <div class="textC">
                                <a href="###" class="btn png enrollNow" data-type="email">邮箱找回</a>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="handStyle">
                            <i class="stylePic png i"></i>
                            <p class="findBack">通过人工服务</p>
                            <div class="textC">
                                <a href="###" class="btn png enrollNow" data-type="person">人工找回</a>
                            </div>
                            <!--人工服务提示-->

                            <!--人工服务提示 end-->
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        <!--选择找回方式 end-->
        <!--安全验证邮箱-->
        <form class="saveCheck hide" id="form_step3_email">
            <p class="title">您正在通过账号绑定的邮箱找回密码，请完成以下操作：</p>
            <div class="pd110">
                <div class="formTr">
                    <b>邮箱：</b><input type="text" class="inputLong">
                </div>
            <div class=" withProblem ml240">
                <a href="###" class="watchEmail btn">立刻查收邮件</a>
                <a href="###" class="orange notGet" data-common="notGet" data-target="#tip_noGet_email">一直没收到邮件？</a>
                <!--提示信息-->
                <div class="tipLayout tipLayoutSmall textL hide" id="tip_noGet_email">
                    <p>
                        请先检查是否在垃圾邮件中。
                    </p>
                    <p>如果还未收到，请尝试“再次发送”。</p>
                    <p>仍然收不到？请尝试<a class="orange" href="###">更换邮箱。</a></p>
                </div>
                <!--提示信息 end-->
            </div>
            <div class="formTr">
                <b>获得的验证码：</b>
                <input type="text" class="inputSmall textL" id="txt_step3_email_checkcode" data-valid="{'type':'txt', 'msg':'未输入验证码'}">
                <i class="error hide" id="ico_step3_email_checkcode"></i>
                <span id="msg_step3_email_checkcode"></span>
            </div>
            </div>
            <div class="linear png ft textC">
                <a href="##" class="btn enrollNow" id="btn_submit_step3_email">下一步</a>
                <a href="##" class="btn enrollNow goBack" id="btn_cancel_step3_email">返回</a>
            </div>
        </form>
        <!--安全验证邮箱- end-->
        <!--安全验证手机-->
        <form class="saveCheck hide" id="form_step3_mobile">
            <p class="title">您正在通过账号绑定的手机号码找回密码，请完成以下操作：</p>
            <div class="pd110">
            <div class="formTr">
                <b>手机号码：</b><input type="text" class="inputLong">
            </div>
            <div class="withProblem ml240">
                <a href="###" class="watchEmail btn" >发送验证码到手机</a>
                <a href="###" class="orange notGet" data-common="notGet" data-target="#tip_noGet_mobile">没收到？</a>
                <!--提示信息-->
                <div class="tipLayout tipLayoutBig textL hide" id="tip_noGet_mobile">
                    <p>
                        网络通讯异常会造成短信丢失，您可以尝试“再次发送”
                    </p>
                    <p>请核实手机是否已欠费停机，或者屏蔽了系统短信。</p>
                </div>
                <!--提示信息 end-->
            </div>
            <div class="formTr">
                <b>获得的验证码：</b>
                <input type="text" class="inputSmall textL" id="txt_step3_mobile_checkcode" data-valid="{'type':'txt', 'msg':'未输入验证码'}">
                <i class="error hide" id="ico_step3_mobile_checkcode"></i>
                <span id="msg_step3_mobile_checkcode"></span>
            </div>
            </div>
            <div class="linear png ft textC">
                <a href="##" class="btn enrollNow" id="btn_submit_step3_mobile">下一步</a>
                <a href="##" class="btn enrollNow goBack" id="btn_cancel_step3_mobile">返回</a>
            </div>
        </form>
        <!--安全验证手机- end-->
        <!--重置密码-->
        <form action="" class="resetPassword hide" id="form_step4_reset">
            <div class="bd">
                <b class="title">请填写您要设置的新密码：</b>
                <div class="formTr">
                    <b>新密码：<i class="require">*</i></b>
                    <input type="password" class="inputLong" id="txt_reset_pwd" data-valid="{'type':'password', 'safeLevel':'icoList_reset_pwd'}">
                    <i class="warn png" id="ico_reset_pwd"></i>
                    <span id="msg_reset_pwd"> 请输入6-40位字符</span>
                    <span class="list hide" id="icoList_reset_pwd"><em class="cur">低</em><em>中</em><em>高</em></span>
                </div>
                <div class="formTr">
                    <b>确认新密码：<i class="require">*</i></b>
                    <input type="password" class="inputLong" id="txt_reset_pwdAgain" data-valid="{'type':'passwordAgain', 'origin':'txt_reset_pwd'}">
                    <i class="warn png hide" id="ico_reset_pwdAgain"></i>
                    <span id="msg_reset_pwdAgain"></span>
                </div>
            </div>
            <div class="ft textC linear png">
                <a href="###" class="btn enrollNow" id="btn_submit_step4">确定</a>
            </div>
        </form>
        <!--重置密码end-->
        <!--重置密码成功-->
        <div class="passwordSuccess textC hide" id="div_success">
            <div class="congratulation"><i class="btn png"></i>成功重置密码</div>
            <p class="ft">请牢记您的游戏密码，建议您尽快完善资料并进行<a class="orange">安全设置</a></p>
        </div>
        <!--重置密码成功 end-->
    </div>
    <!--找回密码end-->
</div>
<!-- 底部内容 -->
<div class="foot userAuto">
	<div class="wrap">
		<ul>
			<li class="links">
				<i class="line"></i>
				<p class="fw">友情链接：</p>
				<ul>
					<li>
						<a href="###"><img src="../images/link_1.png" /></a>
					</li>
					<li>
						<a href="###"><img src="../images/link_2.png" /></a>
					</li>
					<li>
						<a href="###"><img src="../images/link_3.png" /></a>
					</li>
					<li>
						<a href="###"><img src="../images/link_4.png" /></a>
					</li>
					<li>
						<a href="###"><img src="../images/link_5.png" /></a>
					</li>
					<li>
						<a href="###"><img src="../images/link_6.png" /></a>
					</li>
					<li>
						<a href="###"><img src="../images/link_7.png" /></a>
					</li>
					<li>
						<a href="###"><img src="../images/link_8.png" /></a>
					</li>
					<li>
						<a href="###"><img src="../images/link_9.png" /></a>
					</li>
					<li>
						<a href="###"><img src="../images/link_10.png" /></a>
					</li>
					<li>
						<a href="###"><img src="../images/link_11.png" /></a>
					</li>
					<li>
						<a href="###"><img src="../images/link_12.png" /></a>
					</li>
				</ul>
				<p class="fw">分享到：</p>
				<div class="bshare-custom icon-medium">
					<a title="分享到QQ空间" class="bshare-qzone"></a>
					<a title="分享到新浪微博" class="bshare-sinaminiblog"></a>
					<a title="分享到人人网" class="bshare-renren"></a>
					<a title="分享到腾讯微博" class="bshare-qqmb"></a>
					<a title="分享到网易微博" class="bshare-neteasemb"></a>
				</div>
			</li>
			<li class="operators">
				<i class="line"></i>
				<p class="fw pt10">运营资质：</p>
				<p>文网文证：沪文网[2010]274号</p>
				<p>网站备案：[浙B2-20090273]</p>
				<p>版权所有：杭州边锋网络技术有限公司</p>
				<p>适龄提示：6岁以上使用</p>
				<p>家长监护<a href="###"><i class="guardianship dv"></i></a></p>
				<a href="###"><i class="police"></i></a>
			</li>
			<li class="contactUs">
				<p class="fw pt10">联系我们：</p>
				<p>邮箱：jixiaojing01@bianfeng.com</p>
				<p>Q  Q：425864332</p>
				<p>电话：0571-87859210</p>
				<p>传真：0571-87859210</p>
				<p>地址：杭州西斗门路3号天堂软件园B幢C座3楼</p>
				<p>官方微博</p>
				<div class="bshare-custom icon-medium">
					<a title="分享到新浪微博" class="bshare-sinaminiblog"></a>
					<span>@白山在线</span>	
				</div>
			</li>
		</ul>
	</div>
</div>
<!-- 底部内容End -->
<!--modal 人工服务找回密码弹出层-->
<div class="modal handService hide" id="dialog_handService">
    <div class="mask"></div>
    <div class="modalContent">
        <div class="modalhd png"><a class="close png" title="关闭" id="btn_dialog_handService_close"></a></div>
        <div class="modalBd">
           <h3>人工找回密码的方式如下：</h3>
           <p>请用您注册时的手机号码138****2533拨打热线：<i class="orange bold">400-087-8578</i>与客服联系找回密码</p>
           <div class="linearTop png">
               如果手机138****2533丢失或停用，请用您目前常用的手机 号码拨打客服热线，在客服引导下找回密码。
           </div>
        </div>
        <div class="modalFt png"></div>
    </div>
</div>
<!--modal 人工服务找回密码弹出层 end-->


<script src="../j/jquery-1.9.1.min.js"></script>
<script src="../j/formValid.js"></script>

<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#style=-1&amp;uuid=&amp;pophcol=2&amp;lang=zh"></script>
<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>

<script type="text/javascript">
$(function() {
	var ui = {
        $nav_step: $('#nav_step'),
		$txt_valids: $('[data-valid]'),
        $form_step1: $('#form_step1'),
        $btn_submit_step1: $('#btn_submit_step1'),
        $div_step2: $('#div_step2'),
        $div_by_style: $('#div_by_style'),
        $form_step3_email: $('#form_step3_email'),
        $txt_step3_email_checkcode: $('#txt_step3_email_checkcode'),
        $btn_submit_step3_email: $('#btn_submit_step3_email'),
        $btn_cancel_step3_email: $('#btn_cancel_step3_email'),
        $btn_step3_email_reget: $('#btn_step3_email_reget'),
        $form_step3_mobile: $('#form_step3_mobile'),
        $txt_step3_mobile_checkcode: $('#txt_step3_mobile_checkcode'),
        $btn_submit_step3_mobile: $('#btn_submit_step3_mobile'),
        $btn_cancel_step3_mobile: $('#btn_cancel_step3_mobile'),
        $btn_step3_mobile_reget: $('#btn_step3_mobile_reget'),
        $dialog_handService: $('#dialog_handService'),
        $btn_dialog_handService_close: $('#btn_dialog_handService_close'),
        $btn_common: $('[data-common]'),
        $tip_noGet_email: $('#tip_noGet_email'),
        $tip_noGet_mobile: $('#tip_noGet_mobile'),
        $form_step4_reset: $('#form_step4_reset'),
        $btn_submit_step4: $('#btn_submit_step4'),
        $div_success: $('#div_success')
	};

	var oPage = {
		init: function() {
			this.view();
			this.bindEvent();
		},
		view: function() {
            this.fShowStepContent(1);
		},
		bindEvent: function() {
            var self = this;
			// 表单校验
            ui.$txt_valids.on('blur', function() {
                fInputValid($(this));
            });
            // 第一步表单提交
            ui.$btn_submit_step1.on('click', function() {
                var flag = true;
                flag = self.fFormValid(ui.$form_step1);
                if(flag) {//表单异步请求
                    self.fShowStepContent(2);
                }
            });
            // 第二步找回方式
            ui.$div_by_style.on('click', 'a', function() {
                var $this = $(this);
                var type = $this.data('type');
                if($this.hasClass('disabled')) {
                    return false;
                }
                if(type) {
                    self.fShowStepContent(3, type);
                }
            });
            // 第三步-邮箱
            ui.$btn_submit_step3_email.on('click', function() {
                var flag = true;
                flag = self.fFormValid(ui.$form_step3_email);
                if(flag) {//表单异步请求
                    if(self.fAsyncValidCheckCode('email', ui.$txt_step3_email_checkcode.val())) {
                        self.fShowStepContent(4);
                    }
                }
            });
            ui.$btn_cancel_step3_email.on('click', function() {
                self.fShowStepContent(2);
            });
            // 第三步-手机
            ui.$btn_submit_step3_mobile.on('click', function() {
                var flag = true;
                flag = self.fFormValid(ui.$form_step3_mobile);
                if(flag) {//表单异步请求
                    if(self.fAsyncValidCheckCode('mobile', ui.$txt_step3_mobile_checkcode.val())) {
                        self.fShowStepContent(4);
                    }
                }
            });
            ui.$btn_cancel_step3_mobile.on('click', function() {
                self.fShowStepContent(2);
            });
            // 第三步-人工找回
            ui.$btn_dialog_handService_close.on('click', function() {
                ui.$dialog_handService.addClass('hide');
            });
            // 第四步-重置密码
            ui.$btn_submit_step4.on('click', function() {
                var flag = true;
                flag = self.fFormValid(ui.$form_step4_reset);
                if(flag) {//表单异步请求
                    self.fShowStepContent(5);
                }
            });
            // 通用
            ui.$btn_common.on('click', function() {
                var $this = $(this),
                    common = $this.data('common');
                if(common == 'otherType') {//选择其他方式
                    //self.fShowStepContent(2);
                } else if(common == 'notGet') {//没收到验证码
                   // $this.next().addClass("hide");
                    var sTarget=$this.attr('data-target');
                    var $Target=$(sTarget);
                    $Target.toggleClass('hide');
                }
            });
		},
        // 表单校验
        fFormValid: function($form) {
            var self = this;
            var flag = true;
            $form.find('[data-valid]').each(function() {
                flag = fInputValid($(this));
                if(!flag) {
                    return false;
                }
            });
            return flag;
        },
        // 显示对应步骤的内容
        fShowStepContent: function(step, type) {
            // 导航
            if(step == 5) {//找回密码成功，结束
                ui.$nav_step.hide();
            } else {
                ui.$nav_step.show().find('li').removeClass('cur').eq(step - 1).addClass('cur');
            }
            // 内容
            ui.$form_step1.addClass('hide');
            ui.$div_step2.addClass('hide');
            ui.$form_step3_email.addClass('hide');
            ui.$form_step3_mobile.addClass('hide');
            ui.$form_step4_reset.addClass('hide');
            ui.$div_success.addClass('hide');
            if(step == 1) {
                ui.$form_step1.removeClass('hide');
            } else if(step == 2) {
                ui.$div_step2.removeClass('hide');
            } else if(step == 3) {
                if(type == 'email') {
                    ui.$tip_noGet_email.addClass('hide');
                    ui.$form_step3_email.removeClass('hide');
                    ui.$btn_step3_email_reget.prop('disabled', true);
                   // self.fSetTime(ui.$btn_step3_email_reget);
                } else if(type == 'mobile') {
                    ui.$tip_noGet_mobile.addClass('hide');
                    ui.$form_step3_mobile.removeClass('hide');
                } else if(type == 'person') {
                    this.fShowStepContent(2, 'person');
                    ui.$dialog_handService.removeClass('hide');
                }
            } else if(step == 4) {
                ui.$form_step4_reset.removeClass('hide');
            } else if(step == 5) {
                ui.$div_success.removeClass('hide');
            }
        },
        // 异步请求-第三步的校验码
        fAsyncValidCheckCode: function(type, checkcode) {
            var flag = true;

            return flag;
        },
        // 计时1分钟, 可再次点击发送验证码
        fSetTime: function($btn) {
            var self = this;
            var time = 60, strShowText = '';
            var timing = function() {
                self.timeout = setTimeout(function() {
                    if(time > 0) {
                        time--;
                        strShowText = '（' + time + '秒后）重新获取验证码';
                        $btn.text(strShowText);
                        timing();
                    } else {
                        strShowText = '重新获取验证码';
                        $btn.prop('disabled', false);
                        $btn.text(strShowText);
                    }
                }, 1000);
            };

            if(this.timeout) {
                clearTimeout(this.timeout);
            }
            timing();
        },
        // 发送验证码
        fSendCheckCode: function(type) {
            if(type == 'email') {

            } else if(type == 'mobile') {

            }
        }
	}

	oPage.init();
})
</script>

</body>
</html>